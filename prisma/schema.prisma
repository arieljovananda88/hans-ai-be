// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model HealthCheck {
  id                    Int @id @default(autoincrement())
  Message               String
}

model Users {
  id                    String @id @default(uuid())
  displayName           String
  email                 String @unique
  password              String
  dietaryPreferences    String
  allergies             String

  PantryItems PantryItems[]
  NutritionPlans NutritionPlans[]
  MealLogs MealLogs[]
  WeightLogs WeightLogs[]
  GeneratedRecipes GeneratedRecipes[]
}

model PantryItems {
  id                    String @id @default(uuid())
  userId                String
  user                  Users @relation(fields: [userId], references: [id])
  itemName              String
  quantity              Int
  experationDate        DateTime
}

model NutritionPlans {
  id                    String @id @default(uuid())
  userId                String
  user                  Users @relation(fields: [userId], references: [id])
  caloriesGoal          Float
  startDate             DateTime
  endDate               DateTime

  GeneratedRecipes GeneratedRecipes[]
}

model MealLogs{
  id                    String @id @default(uuid())
  userId                String
  user                  Users @relation(fields: [userId], references: [id])
  date                  DateTime
  mealType              String
  calories              Float
}

model WeightLogs {
  id                    String @id @default(uuid())
  userId                String
  user                  Users @relation(fields: [userId], references: [id])
  date                  DateTime
  weight                Float
}

model GeneratedRecipes {
  id                    String @id @default(uuid())
  userId                String
  user                  Users @relation(fields: [userId], references: [id])
  recipeId              String
  recipe                NutritionPlans @relation(fields: [recipeId], references: [id])
  generatedDate         DateTime
  ingredientAdjustments String
}

model Recipes {
  id                    String @id @default(uuid())
  name                  String
  ingredients           String
  instructions          String
  calories              Float
  dietaryTags           String
}